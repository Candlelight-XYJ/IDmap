test<-add_gpl(human_data_from_biopack,gpl_biocpack,"Homo sapiens")
head(test)
platform_list
names(test)
View(test)
devtools::document()
devtools::document()
devtools::document()
devtools::use_data()
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "GPL91"
geneids <- get_geneids(probeids,gpl,platform)
platform<-"hcg110"
geneids <- get_geneids(probeids,gpl,platform)
devtools::load_all()
devtools::load_all()
geneids <- get_geneids(probeids,gpl,platform)
devtools::load_all()
gpl=NA
if(gpl!=NA){print("hi")}
if(!NA){print("hi")}
head(gpl_list)
devtools
devtools::document()
data(package = "IDmap")
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform)
gpl_list[gpl_list$gpl==gpl,6]
geneids <- get_geneids(probeids,platform,plt.choose=F)
spe_map<-list(human="Homo sapiens")
spe_map
data(package="IDmap")
head(gpl_list)
spe_map$mouse<-"Mus musculus"
tail(gpl_list)
spe_map$rat <- "Rattus norvegicus"
spe_map
species_map<-list(Homo sapiens="human")
spe_map[human]
spe_map["human"]
spe_map["human"][1]
spe_map["human"][[1]]
which(spe_map[[1]]=="Homo sapiens")
which(spe_map[[1]]=="Rattus norvegicus")
which(spe_map=="Rattus norvegicus")
t<-which(spe_map=="Rattus norvegicus")
t
str(t)
t
t[1]
t[[t]]
t[[1]]
names(t)
names(which(spe_map=="Homo sapiens"))
devtools::use_data_raw(spe_map)
devtools::use_data(spe_map)
devtools::document()
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
tryCatch(utils::data("spe_map", package = "IDmap"))
spe_map <- get("spe_map")
spe_map
gpl<-platform
gpl
spe_name <- gpl_list[gpl_list$bioc_package==platform,3]
spe_name
species <- names(which(spe_map==spe_name))
species
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
spe_name <- gpl_list[gpl_list$bioc_package==platform,3]
species <- names(which(spe_map==spe_name))
biopack_status <- gpl_list[gpl_list$bioc_package==platform,6]
datasets <- get_anno_data(species,biopack_status)
species
source_file = "biopack"
paste0(species,"_data_from_",source_file)
spe
spe=species
tryCatch(utils::data(paste0(spe,"_data_from_",source_file), package = "IDmap"))
paste0(spe,"_data_from_",source_file)
data("human_data_from_biopack",package="IDmap")
data(paste0(spe,"_data_from_",source_file), package = "IDmap")
spe
##' get annotation data
##'
##'
##' @param spe,biocpack_status
##'
##' @return returns annotation data
##' @export
get_anno_data <- function(spe,biopack_status){
if(biopack_status == 0){
source_file = "gpl"
}else{
source_file = "biopack"
}
tryCatch(utils::data(paste(spe,"_data_from_",source_file,sep=""), package = "IDmap"))
anno_data <- get(paste0(spe,"_data_from_",source_file))
return(anno_data)
}
spe,"_data_from_",source_file,sep="")
spe
t="zz"
t
str(spe)
paste(spe,"_data_from_",sep="")
data(paste(spe,"_data_from_",source_file,sep="")
)
devtools::document()
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
data_name <- paste0(spe,"_data_from_",source_file)
data_name
tryCatch(utils::data(data_name, package = "IDmap"))
tryCatch(utils::data(eval(parse(text=data_name)), package = "IDmap"))
data_name <- paste0(spe,"_data_from_",source_file)
tryCatch(utils::data(package = "IDmap"))
anno_data <- get(data_name)
head(anno_data)
data_name
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
tryCatch(utils::data("spe_map", package = "IDmap"))
spe_map <- get("spe_map")
gpl_list <- get_gpl_list()
spe_name <- gpl_list[gpl_list$bioc_package==platform,3]
species <- names(which(spe_map==spe_name))
biopack_status <- gpl_list[gpl_list$bioc_package==platform,6]
datasets <- get_anno_data(species,biopack_status)
biopack_status
species
data_name <- paste0(spe,"_data_from_",source_file)
anno_data <- get(data_name)
nrow(anno_data)
datasets <- get_anno_data(species,biopack_status)
rm(list=ls())
devtools
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
pl <- "hcg110"
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
platform <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
tryCatch(utils::data("spe_map", package = "IDmap"))
spe_map <- get("spe_map")
gpl_list <- get_gpl_list()
spe_name <- gpl_list[gpl_list$gpl==gpl,3]
biopack_status <- gpl_list[gpl_list$gpl==gpl,6]
species <- names(which(spe_map==spe_name))
datasets <- get_anno_data(species,biopack_status)
get_anno_data <- function(spe,biopack_status){
if(biopack_status == 0){
source_file = "gpl"
}else{
source_file = "biopack"
}
#Q1 能不能不全部加载数据，只加载目标数据
data_name <- paste0(spe,"_data_from_",source_file)
tryCatch(utils::data(package = "IDmap"))
anno_data <- get(data_name)
return(anno_data)
}
atasets <- get_anno_data(species,biopack_status)
get_anno_data <- function(spe,biopack_status){
if(biopack_status == "0"){
source_file = "gpl"
}else{
source_file = "biopack"
}
data_name <- paste0(spe,"_data_from_",source_file)
tryCatch(utils::data(package = "IDmap"))
anno_data <- get(data_name)
return(anno_data)
}
atasets <- get_anno_data(species,biopack_status)
biopack_status
gpl_list[gpl_list$bioc_package==platform,6]
biopack_status <- gpl_list[gpl_list$bioc_package==platform,6]
biopack_status
if(biopack_status == "0"){
source_file = "gpl"
}else{
source_file = "biopack"
}
source_file
devtools::document()
probeids <- c("1000_at","1001_at","1002_f_at")
platform <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
platform <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
head(geneids)
head(gpl_list)
head(human_data_from_gpl)
tail(human_data_from_gpl)
human_data_from_gpl[100:110,]
probeids <- c("A_23_P101521","A_33_P3695548","A_33_P3266889")
platform <- "GPL10332"
geneids <- get_geneids(probeids,platform,plt.choose=T)
head(geneids)
devtools::document()
data(package="IDmap")
library(devtools)
devtools::load_all()
data(package="IDmap")
head(human_data_from_biopack)
gpl_biocpack<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_biocPackage.csv")
platform_list <- unique(anno_data$platform)
anno_data<-human_data_from_biopack
platform_list <- unique(anno_data$platform)
platform_list
x=platform_list[1]
x
tp <- anno_data[anno_data$platform == x,]
head(tp)
tail(tp)
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
species <- "Homo sapiens"
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
gpl_biocpack<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_biocPackage.csv",stringsAsFactors = F)
anno_data<-human_data_from_biopack
species <- "Homo sapiens"
platform_list <- unique(anno_data$platform)
x=platform_list[1]
tp <- anno_data[anno_data$platform == x,]
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
gpl
tp$gpl <- rep(gpl,times=nrow(tp))
View(tp)
for(x in platform_list){print(x)}
gpl_biocpack<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_biocPackage.csv",stringsAsFactors = F)
data(package="IDmap")
anno_data<-human_data_from_biopack
species <- "Homo sapiens"
add_gpl <- function(anno_data,gpl_biocpack,species){
print(nrow(anno_data))
count=0
result<-data.frame()
platform_list <- unique(anno_data$platform)
for(x in platform_list)
{
tp <- anno_data[anno_data$platform == x,]
if(x=="hgu95av2"){
gpl <- "GPL8300/GPL91"
}else{
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
}
tp$gpl <- rep(gpl,times=nrow(tp))
count=nrow(tp)+count
result<-rbind(result,tp)
}
print(count)
return(result)
}
human_add_gpl<-add_gpl(anno_data,gpl_biocpack,species)
add_gpl <- function(anno_data,gpl_biocpack,species){
print(nrow(anno_data))
count=0
result<-data.frame()
platform_list <- unique(anno_data$platform)
for(x in platform_list)
{
tp <- anno_data[anno_data$platform == x,]
if(x=="hgu95av2"){
gpl <- "GPL8300/GPL91"
}
if(x=="hgu133plus2"){
gpl <- "GPL570/GPL14877"
}
if(x=="hthgu133a"){
gpl <- "GPL3921/GPL17897"
}
if(x=="hugene10sttranscriptcluster"){
gpl <- "GPL6244/GPL17556"
}
if(x=="hugene11sttranscriptcluster"){
gpl <- "GPL11532/GPL18190"
}else{
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
}
tp$gpl <- rep(gpl,times=nrow(tp))
count=nrow(tp)+count
result<-rbind(result,tp)
}
print(count)
return(result)
}
human_add_gpl<-add_gpl(anno_data,gpl_biocpack,species)
add_gpl <- function(anno_data,gpl_biocpack,species){
print(nrow(anno_data))
count=0
result<-data.frame()
platform_list <- unique(anno_data$platform)
flag=1
for(x in platform_list)
{
tp <- anno_data[anno_data$platform == x,]
if(x=="hgu95av2"){
gpl <- "GPL8300/GPL91"
flag=0
}
if(x=="hgu133plus2"){
gpl <- "GPL570/GPL14877"
flag=0
}
if(x=="hthgu133a"){
gpl <- "GPL3921/GPL17897"
flag=0
}
if(x=="hugene10sttranscriptcluster"){
gpl <- "GPL6244/GPL17556"
flag=0
}
if(x=="hugene11sttranscriptcluster"){
gpl <- "GPL11532/GPL18190"
flag=0
}
if(flag){
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
}
tp$gpl <- rep(gpl,times=nrow(tp))
count=nrow(tp)+count
result<-rbind(result,tp)
}
print(count)
return(result)
}
human_add_gpl<-add_gpl(anno_data,gpl_biocpack,species)
add_gpl <- function(anno_data,gpl_biocpack,species){
print(nrow(anno_data))
count=0
result<-data.frame()
platform_list <- unique(anno_data$platform)
for(x in platform_list)
{ print(x)
flag=1
tp <- anno_data[anno_data$platform == x,]
if(x=="hgu95av2"){
gpl <- "GPL8300/GPL91"
flag=0
}
if(x=="hgu133plus2"){
gpl <- "GPL570/GPL14877"
flag=0
}
if(x=="hthgu133a"){
gpl <- "GPL3921/GPL17897"
flag=0
}
if(x=="hugene10sttranscriptcluster"){
gpl <- "GPL6244/GPL17556"
flag=0
}
if(x=="hugene11sttranscriptcluster"){
gpl <- "GPL11532/GPL18190"
flag=0
}
if(flag){
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
}
tp$gpl <- rep(gpl,times=nrow(tp))
count=nrow(tp)+count
result<-rbind(result,tp)
}
print(count)
return(result)
}
human_add_gpl<-add_gpl(anno_data,gpl_biocpack,species)
View(human_add_gpl)
anno_data<-mouse_data_from_biopack
species <- "Mus musculus"
mouse_add_gpl<-add_gpl(anno_data,gpl_biocpack,species)
add_gpl <- function(anno_data,gpl_biocpack,species){
print(nrow(anno_data))
count=0
result<-data.frame()
platform_list <- unique(anno_data$platform)
for(x in platform_list)
{ print(x)
flag=1
tp <- anno_data[anno_data$platform == x,]
if(x=="hgu95av2"){
gpl <- "GPL8300/GPL91"
flag=0
}
if(x=="hgu133plus2"){
gpl <- "GPL570/GPL14877"
flag=0
}
if(x=="hthgu133a"){
gpl <- "GPL3921/GPL17897"
flag=0
}
if(x=="hugene10sttranscriptcluster"){
gpl <- "GPL6244/GPL17556"
flag=0
}
if(x=="hugene11sttranscriptcluster"){
gpl <- "GPL11532/GPL18190"
flag=0
}
if(x=="mouse430a2")
{
gpl <- "GPL1261/GPL8321"
flag=0
}
if(flag){
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
}
tp$gpl <- rep(gpl,times=nrow(tp))
count=nrow(tp)+count
result<-rbind(result,tp)
}
print(count)
return(result)
}
mouse_add_gpl<-add_gpl(anno_data,gpl_biocpack,species)
anno_data<-rat_data_from_biopack
species <- "Rattus norvegicus"
add_gpl <- function(anno_data,gpl_biocpack,species){
print(nrow(anno_data))
count=0
result<-data.frame()
platform_list <- unique(anno_data$platform)
for(x in platform_list)
{ print(x)
flag=1
tp <- anno_data[anno_data$platform == x,]
if(x=="hgu95av2"){
gpl <- "GPL8300/GPL91"
flag=0
}
if(x=="hgu133plus2"){
gpl <- "GPL570/GPL14877"
flag=0
}
if(x=="hthgu133a"){
gpl <- "GPL3921/GPL17897"
flag=0
}
if(x=="hugene10sttranscriptcluster"){
gpl <- "GPL6244/GPL17556"
flag=0
}
if(x=="hugene11sttranscriptcluster"){
gpl <- "GPL11532/GPL18190"
flag=0
}
if(x=="mouse430a2")
{
gpl <- "GPL1261/GPL8321"
flag=0
}
if(flag){
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
}
tp$gpl <- rep(gpl,times=nrow(tp))
count=nrow(tp)+count
result<-rbind(result,tp)
}
print(count)
return(result)
}
rat_add_gpl<-add_gpl(anno_data,gpl_biocpack,species)
save(human_add_gpl,mouse_add_gpl,rat_add_gpl,file = 'F:\\学习文件存放地址\\课题项目\\IDmap\\all_probeid2geneid_add_gpl.Rdata')
rm(list=ls())
load('F:\\学习文件存放地址\\课题项目\\IDmap\\all_probeid2geneid_add_gpl.Rdata')
human_data_from_biopack <- human_add_gpl
mouse_data_from_biopack <- mouse_add_gpl
rat_data_from_biopack <- rat_add_gpl
library(devtools)
devtools::use_data(human_data_from_biopack,mouse_data_from_biopack,rat_data_from_biopack,overwrite = T)
load("C:/Users/admin/Desktop/IDmap/data/human_data_from_biopack.rda")
load("C:/Users/admin/Desktop/IDmap/data/human_data_from_gpl.rda")
View(human_data_from_gpl)
colnames(human_data_from_gpl)
colnames(human_data_from_gpl)<-c("gpl","title", "species","probe_id","gene_id")
colnames(mouse_data_from_gpl)<-c("gpl","title", "species","probe_id","gene_id")
colnames<-(rat_data_from_gpl)<-c("gpl","title", "species","probe_id","gene_id")
save(human_data_from_gpl,mouse_data_from_gpl,rat_data_from_gpl,file = "F:\\学习文件存放地址\\课题项目\\IDmap\\all_all_probeid2geneid_from_gpl.Rdata")
data(package="IDmap")
library(devtools)
devtools::load_all()
colnames(human_data_from_gpl)<-c("gpl","title", "species","probe_id","gene_id")
colnames(mouse_data_from_gpl)<-c("gpl","title", "species","probe_id","gene_id")
colnames<-(rat_data_from_gpl)<-c("gpl","title", "species","probe_id","gene_id")
colnames(rat_data_from_gpl)<-c("gpl","title", "species","probe_id","gene_id")
head(human_data_from_gpl)
save(human_data_from_gpl,mouse_data_from_gpl,rat_data_from_gpl,file = "F:\\学习文件存放地址\\课题项目\\IDmap\\all_all_probeid2geneid_from_gpl.Rdata")
rm(list = ls())
load("F:\\学习文件存放地址\\课题项目\\IDmap\\all_all_probeid2geneid_from_gpl.Rdata")
devtools::use_data(human_data_from_gpl,mouse_data_from_gpl,rat_data_from_gpl,overwrite = T)
data(package="IDmap")
head(human_data_from_gpl)
