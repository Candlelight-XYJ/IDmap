devtools::document()
?get_geneids
devtools::document()
?get_geneids
devtools::use_vignette("IDmap-vignette")
devtools::document()
library(roxygen2)
devtools::document()
devtools::document()
library(devtools)
library(roxygen2)
devtools::document()
input_data<-load("F:\\学习文件存放地址\\课题项目\\IDmap\\all_common_probeid2geneid.Rdata")
input_data
head(human_data_from_gpl)
head(human_data_from_biopack)
devtools::doc
devtools::document()
devtools::document()
data()
data(package = "ggplot2")
library(ggplot2)
data(package = "ggplot2")
data(smallcell)
devtools::document()
IDmap?
?
>
?IDmap
?get_geneids
devtools::use_testtha
devtools::use_testthat()
devtools::document()
devtools::load_all()
data(IDmap)
data(package="IDmap")
data<-load("F:\\学习文件存放地址\\课题项目\\IDmap\\all_common_probeid2geneid.Rdata")
search()
data
devtools::use_data(data,probe2geneids)
devtools::(human_data_from_gpl,mouse_data_from_gpl)
devtools::use_data(human_data_from_gpl,mouse_data_from_gpl,rat_data_from_gpl)
devtools::use_data(human_data_from_biopack,mouse_data_from_biopack,rat_data_from_biopack)
devtools::load_all()
data(package="IDMap")
data(package="IDmap")
head(human_data_from_biopack)
probeids <- c("1000_at","1001_at","1002_f_at")
datasets <- "human_data_from_biopack"
datasets <- human_data_from_biopack
platform <- "hcg110"
geneids <- get_geneids(probeids,datasets,platform)
head(geneids)
devtools::document()
devtools::document()
?get_geneids
devtools::document()
library(knitr)
?kable()
gpl_not_in_biopack<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_not_in_biopack.csv")
gpl_biopack<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_biocPackage.csv")
kable(head(iris), format = "latex")
kable(head(iris), format = "html")
kable(head(iris), format = "markdown")
head(gpl_biopack)
gpl_bp<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_bp.csv")
gpl_not_in_bp<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_not_in_bp.csv")
kable(gpl_bp)
devtools::document()
browseVignettes(IDmap)
browseVignettes("IDmap")
devtools::build_vignettes()
browseVignettes("IDmap")
tryCatch(utils::data("probeids2geneids", package="IDmap"))
devtolls
devtools::load_all()
tryCatch(utils::data("probeids2geneids", package="IDmap"))
View(probeids2geneids)
probeids2geneids <- get("probeids2geneids")
load("F:\\学习文件存放地址\\课题项目\\IDmap\\all_common_probeid2geneid.Rdata")
devtools::use_data(human_data_from_biopack,human_data_from_gpl,mouse_data_from_biopack,mouse_data_from_gpl,rat_data_from_biopack,rat_data_from_gpl)
devtools::document()
?get_geneids
devtools::document()
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
platform <- "hcg110"
geneids <- get_geneids(probeids,platform)
tryCatch(utils::data("gpl_list", package = "IDmap"))
gpl_list <- get("gpl_list")
head(gpl_list)
devtools::document()
devtools::document()
devtools::document()
devtools::document()
devtools::document()
rm(list=ls())
gpl_info=read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_biocPackage.csv",stringsAsFactors = F)
library(annotate)
tail(sort(table(gpl_info$organism)))
platform='hgu95av2'
library(platformDB,character.only = T)
platformDB=paste(platform,".db",sep="")
library(platformDB,character.only = T)
eval(parse(text = paste('keytypes(',platformDB,')',sep='')))
library(devtools)
devtools::load_all()
data(package="IDmap")
head(human_data_from_biopack)
gpl_biocpack<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_biocPackage.csv")
head(gpl_biocpack)
head(human_data_from_gpl)
add_gpl <- function(anno_data,gpl_biocpack){
platform_list <- unique(anno_data$platform)
save_length<-c()
tmp = lapply(platform_list, function(x){
tp <- anno_data[anno_data$platform == x,]
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x),3]
add_gpl_data <- data.frame(gpl = rep(gpl,times=nrow(tp)),
platform = anno_data$platform,
probe_id = anno_data$probe_id,
gene_id = anno_data$gene_id)
})
return(tmp)
}
test<-add_gpl(human_data_from_biopack,gpl_biocpack)
t<-gpl_biocpack$bioc_package
t
gpl_biocpack<-read.csv("F:\\学习文件存放地址\\课题项目\\IDmap\\gpl_biocPackage.csv",stringsAsFactors = F)
test<-add_gpl(human_data_from_biopack,gpl_biocpack)
anno_data<-human_data_from_biopack
platform_list <- unique(anno_data$platform)
platform_list
tp <- anno_data[anno_data$platform == x,]
tp <- anno_data[anno_data$platform == platform_list[1],]
nrow(tp)
head(tp)
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x),3]
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package ==  platform_list[1]),3]
gpl
tp$gpl <- gpl
head(tp
)
add_gpl <- function(anno_data,gpl_biocpack){
platform_list <- unique(anno_data$platform)
tmp = lapply(platform_list, function(x){
tp <- anno_data[anno_data$platform == x,]
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x),3]
tp$gpl <- gpl
})
return(tmp)
}
test<-add_gpl(human_data_from_biopack,gpl_biocpack)
head(test)
1&&2
1&2
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x && gpl_biocpack$organism == species,3]
add_gpl <- function(anno_data,gpl_biocpack,species){
platform_list <- unique(anno_data$platform)
tmp = lapply(platform_list, function(x){
tp <- anno_data[anno_data$platform == x,]
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x && gpl_biocpack$organism == species),3]
tp$gpl <- gpl
})
return(tmp)
}
test<-add_gpl(human_data_from_biopack,gpl_biocpack,"Homo sapiens")
x=platform_list[1]
tp <- anno_data[anno_data$platform == x,]
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x && gpl_biocpack$organism == species),3]
gpl
x
species
species <- "Homo sapiens"
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x && gpl_biocpack$organism == species),3]
gpl
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
gpl
add_gpl <- function(anno_data,gpl_biocpack,species){
platform_list <- unique(anno_data$platform)
tmp = lapply(platform_list, function(x){
tp <- anno_data[anno_data$platform == x,]
gpl <- gpl_biocpack[which(gpl_biocpack$bioc_package == x & gpl_biocpack$organism == species),3]
tp$gpl <- gpl
})
return(tmp)
}
test<-add_gpl(human_data_from_biopack,gpl_biocpack,"Homo sapiens")
head(test)
platform_list
names(test)
View(test)
devtools::document()
devtools::document()
devtools::document()
devtools::use_data()
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "GPL91"
geneids <- get_geneids(probeids,gpl,platform)
platform<-"hcg110"
geneids <- get_geneids(probeids,gpl,platform)
devtools::load_all()
devtools::load_all()
geneids <- get_geneids(probeids,gpl,platform)
devtools::load_all()
gpl=NA
if(gpl!=NA){print("hi")}
if(!NA){print("hi")}
head(gpl_list)
devtools
devtools::document()
data(package = "IDmap")
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform)
gpl_list[gpl_list$gpl==gpl,6]
geneids <- get_geneids(probeids,platform,plt.choose=F)
spe_map<-list(human="Homo sapiens")
spe_map
data(package="IDmap")
head(gpl_list)
spe_map$mouse<-"Mus musculus"
tail(gpl_list)
spe_map$rat <- "Rattus norvegicus"
spe_map
species_map<-list(Homo sapiens="human")
spe_map[human]
spe_map["human"]
spe_map["human"][1]
spe_map["human"][[1]]
which(spe_map[[1]]=="Homo sapiens")
which(spe_map[[1]]=="Rattus norvegicus")
which(spe_map=="Rattus norvegicus")
t<-which(spe_map=="Rattus norvegicus")
t
str(t)
t
t[1]
t[[t]]
t[[1]]
names(t)
names(which(spe_map=="Homo sapiens"))
devtools::use_data_raw(spe_map)
devtools::use_data(spe_map)
devtools::document()
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
tryCatch(utils::data("spe_map", package = "IDmap"))
spe_map <- get("spe_map")
spe_map
gpl<-platform
gpl
spe_name <- gpl_list[gpl_list$bioc_package==platform,3]
spe_name
species <- names(which(spe_map==spe_name))
species
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
spe_name <- gpl_list[gpl_list$bioc_package==platform,3]
species <- names(which(spe_map==spe_name))
biopack_status <- gpl_list[gpl_list$bioc_package==platform,6]
datasets <- get_anno_data(species,biopack_status)
species
source_file = "biopack"
paste0(species,"_data_from_",source_file)
spe
spe=species
tryCatch(utils::data(paste0(spe,"_data_from_",source_file), package = "IDmap"))
paste0(spe,"_data_from_",source_file)
data("human_data_from_biopack",package="IDmap")
data(paste0(spe,"_data_from_",source_file), package = "IDmap")
spe
##' get annotation data
##'
##'
##' @param spe,biocpack_status
##'
##' @return returns annotation data
##' @export
get_anno_data <- function(spe,biopack_status){
if(biopack_status == 0){
source_file = "gpl"
}else{
source_file = "biopack"
}
tryCatch(utils::data(paste(spe,"_data_from_",source_file,sep=""), package = "IDmap"))
anno_data <- get(paste0(spe,"_data_from_",source_file))
return(anno_data)
}
spe,"_data_from_",source_file,sep="")
spe
t="zz"
t
str(spe)
paste(spe,"_data_from_",sep="")
data(paste(spe,"_data_from_",source_file,sep="")
)
devtools::document()
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
data_name <- paste0(spe,"_data_from_",source_file)
data_name
tryCatch(utils::data(data_name, package = "IDmap"))
tryCatch(utils::data(eval(parse(text=data_name)), package = "IDmap"))
data_name <- paste0(spe,"_data_from_",source_file)
tryCatch(utils::data(package = "IDmap"))
anno_data <- get(data_name)
head(anno_data)
data_name
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
tryCatch(utils::data("spe_map", package = "IDmap"))
spe_map <- get("spe_map")
gpl_list <- get_gpl_list()
spe_name <- gpl_list[gpl_list$bioc_package==platform,3]
species <- names(which(spe_map==spe_name))
biopack_status <- gpl_list[gpl_list$bioc_package==platform,6]
datasets <- get_anno_data(species,biopack_status)
biopack_status
species
data_name <- paste0(spe,"_data_from_",source_file)
anno_data <- get(data_name)
nrow(anno_data)
datasets <- get_anno_data(species,biopack_status)
rm(list=ls())
devtools
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
pl <- "hcg110"
gpl <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
platform <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
tryCatch(utils::data("spe_map", package = "IDmap"))
spe_map <- get("spe_map")
gpl_list <- get_gpl_list()
spe_name <- gpl_list[gpl_list$gpl==gpl,3]
biopack_status <- gpl_list[gpl_list$gpl==gpl,6]
species <- names(which(spe_map==spe_name))
datasets <- get_anno_data(species,biopack_status)
get_anno_data <- function(spe,biopack_status){
if(biopack_status == 0){
source_file = "gpl"
}else{
source_file = "biopack"
}
#Q1 能不能不全部加载数据，只加载目标数据
data_name <- paste0(spe,"_data_from_",source_file)
tryCatch(utils::data(package = "IDmap"))
anno_data <- get(data_name)
return(anno_data)
}
atasets <- get_anno_data(species,biopack_status)
get_anno_data <- function(spe,biopack_status){
if(biopack_status == "0"){
source_file = "gpl"
}else{
source_file = "biopack"
}
data_name <- paste0(spe,"_data_from_",source_file)
tryCatch(utils::data(package = "IDmap"))
anno_data <- get(data_name)
return(anno_data)
}
atasets <- get_anno_data(species,biopack_status)
biopack_status
gpl_list[gpl_list$bioc_package==platform,6]
biopack_status <- gpl_list[gpl_list$bioc_package==platform,6]
biopack_status
if(biopack_status == "0"){
source_file = "gpl"
}else{
source_file = "biopack"
}
source_file
devtools::document()
probeids <- c("1000_at","1001_at","1002_f_at")
platform <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
devtools::load_all()
geneids <- get_geneids(probeids,platform,plt.choose=F)
devtools::load_all()
probeids <- c("1000_at","1001_at","1002_f_at")
platform <- "hcg110"
geneids <- get_geneids(probeids,platform,plt.choose=F)
head(geneids)
head(gpl_list)
head(human_data_from_gpl)
tail(human_data_from_gpl)
human_data_from_gpl[100:110,]
probeids <- c("A_23_P101521","A_33_P3695548","A_33_P3266889")
platform <- "GPL10332"
geneids <- get_geneids(probeids,platform,plt.choose=T)
head(geneids)
devtools::document()
